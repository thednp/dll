<!DOCTYPE html>
<html lang="en"> 
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Double Lazy Load for lazy loading images, background images and videos">
    <meta name="keywords" content="Double Lazy Load,dll.js,Javascript,Native Javascript,vanilla javascript">
    <meta name="author" content="thednp">
    <link rel="shortcut icon" href="./assets/img/favicon.ico">
    <link rel="apple-touch-icon" href="./assets/img/apple-touch-icon.png">

    <title>DLL.js | Double Lazy Load</title>
  
    <!-- RESET CSS -->
    <link type="text/css" href="./assets/css/reset.css" rel="stylesheet">
  
  
    <!-- DEMO DLL CSS -->
    <link type="text/css" href="./assets/css/dll.css" rel="stylesheet">

    <!-- Tooltip CSS -->
    <link type="text/css" href="./assets/css/tooltip.min.css" rel="stylesheet">
    
  <!-- Synthax highlighter -->
  <link href="./assets/css/prism.css" rel="stylesheet">	
  
</head>

<body>
  <div class="fill cover"></div>
  <div class="fill overlay"></div>
  
  <div class="site-wrapper">
 
  <div class="navbar-wrapper">
      <div class="content-wrap">
    <h1>DLL.<span>js</span></h1>
    <ul class="nav">
      <li><a href="https://github.com/thednp/dll.js">Github</a></li>
      <li><a href="https://github.com/thednp/dll.js/archive/master.zip">Download</a></li>
      <li><a href="http://www.jsdelivr.com/#!dll.js">CDN</a></li>
    </ul>
      </div>
    </div>
  

  <div class="content-wrap">
    <h2>What's going on?</h2>
    <p>DLL.js lazy loaded a 4K image then triggered a callback function. Here's what was actually in place:</p>
<pre><code class="language-javascript">// when finished do some callback
function imageLoadFinished() {
  //doin some cool stuff, you gonna check the scripts.js
}

// we lazy load to the .cover class element
new dll('.cover',imageLoadFinished); 
</code></pre>

    <p>Unlike the examples below, this is an example where the target element has no child elements and is the only subject to DLL lazy load.</p>
  </div>

  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  
  <div class="content-wrap">
    <h2>Let's do some lazy load on click</h2>
    <p>In this example, we target the parent <code>.testCol1</code> element with our function, and DLL lazy loads it's inner elements. </p>
    <a href="#" class="btn btn-olive top-right">Click me</a>
    <div class="columns testCol1 fill">
      <div class="col2">
        <img src="./assets/img/img-blank.gif" alt="">
      </div>
      <div class="col2">
        <img src="./assets/img/img-blank.gif" alt="">
      </div>
      <div class="col2">
        <img src="./assets/img/img-blank.gif" alt="">
      </div>
      <div class="col2">
        <img src="./assets/img/img-blank.gif" alt="">
      </div>
      <div class="col2">
        <img src="./assets/img/img-blank.gif" alt="">
      </div>
      <div class="col2">
        <img src="./assets/img/img-blank.gif" alt="">
      </div>
    </div>
    <p>What happened here? DLL.js lazy loaded an element's children and triggered a function when last item loaded. The code looks like this:</p>
<pre><code class="language-javascript">//listening to button click
var btn = document.querySelector('.btn');

// the target element
var el = document.querySelector('.testCol1');

// when load is complete, we run this callback function
function callback(){					
  //do some animation for the element and all children having data-src attribute

  //add loaded class 
  el.classList.add('loaded')
}

// the click handler
function clickExample(){
  // if element is not loaded, we initiate dll.js
  if ( !el.classList.contains('loaded') ){
    new dll(el, callback);
  }
}

// you know the thing
btn.addEventListener('click', clickExample, false);
</code></pre>		
    
  </div>
  
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  
  
  
  <div class="content-wrap onscroll">
    <h2>Let's do some lazy load on scroll</h2>
    <p>In this example, we target the parent <code>.img-wrapper</code> element with our function, and DLL lazy loads it and it's inner elements. And now we'll scroll down a bit.</p>
        
    <div class="columns testCol2 img-wrapper fill">
      <div class="col2">
        <img src="./assets/img/img-blank.gif" alt="">
      </div>
      <div class="col2">
        <img src="./assets/img/img-blank.gif" alt="">
      </div>
      <div class="col2">
        <img src="./assets/img/img-blank.gif" alt="">
      </div>
      <div class="col2">
        <img src="./assets/img/img-blank.gif" alt="">
      </div>
      <div class="col2">
        <img src="./assets/img/img-blank.gif" alt="">
      </div>
      <div class="col2">
        <img src="./assets/img/img-blank.gif" alt="">
      </div>
    </div>
    <p>What happened here? DLL.js lazy loaded an element with all it's children and triggered a function when last item loaded. The code looks like this:</p>
<pre><code class="language-javascript">// the target element
var el = document.querySelector('.testCol2');

// when load is complete, run this callback function
function callback(){					
  //do some animation for the element's children having data-src attribute
  
  //add a class to parent element, to make sure things only work once 
  el.classList.add('.loaded');
}

// your scroll handler
function scrollHandler(){
  //when element is in viewport, we initiate dll.js
  if ( elementInViewport(el) && !el.classList.contains('loaded') ){
    new dll(el, callback);
  }
}

// another listener, yeey
window.addEventListener('scroll', scrollHandler, false);
</code></pre>
    <p>Grab the <code>elementInViewport</code> <a href="https://gist.github.com/vincentorback/9ca8446a4c7c87ce3623" target="_blank">right here</a>.</p>		
  </div>

  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  

  <div class="content-wrap onscroll">
    <h2>Let's play with videos</h2>
    <p>Similar to the above example, but this time we load a bunch of videos. Check notes below to get a glimpse on how it works:</p>
    <div class="columns testCol3 video-wrapper fill" >
      <div class="col2">
        <video poster="https://img-9gag-fun.9cache.com/photo/a24K1Me_460s.jpg" autoplay loop muted>
          <source data-src="https://img-9gag-fun.9cache.com/photo/a24K1Me_460sv.mp4" type="video/mp4">
        </video>
      </div>
    <div class="col2">
      <video poster="https://img-9gag-fun.9cache.com/photo/aDzY1YZ_460s.jpg" autoplay loop muted>
        <source data-src="https://img-9gag-fun.9cache.com/photo/aDzY1YZ_460sv.mp4" type="video/mp4">
        </video>
      </div>
      <div class="col2">
        <video poster="https://img-9gag-fun.9cache.com/photo/a9A1x40_460s.jpg" autoplay loop muted>
          <source data-src="https://img-9gag-fun.9cache.com/photo/a9A1x40_460sv.mp4" type="video/mp4">
        </video>
      </div>
      <div class="col2">
        <video poster="https://img-9gag-fun.9cache.com/photo/aY4VLyO_460s.jpg" autoplay loop muted>
          <source data-src="https://img-9gag-fun.9cache.com/photo/aY4VLyO_460sv.mp4" type="video/mp4">
        </video>
      </div>
    </div>


    <p>DLL.js will only target videos with the following structure:</p>
<pre><code class="language-markup">&lt;video id="myVideo" poster="video/my-video.jpg"&gt;
  &lt;source data-src="video/my-video.mp4" type="video/mp4"&gt;
&lt;/video&gt;
</code></pre>
    
    <p>If your content has the right structure, you can do everything else just like the usual:</p>
<pre><code class="language-javascript">// grab a video
var myVideo = document.getElementById('myVideo');
// initialize for a single video element
new dll(myVideo, callback);

// OR

// grab a wrapper element
var myWrapper = document.getElementById('myWrapper');
// initialize for and element and/or all child elements
new dll(myWrapper, callback);
</code></pre>
    <p>Both of the above produce the same effect.</p>
  </div>

  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>


  <div class="content-wrap">
    <h2>In case you missed the features</h2>
    <ul>
      <li>ES6/ES7 scripted package</li>
      <li>Lazy load a single element that has <code>data-src</code> attribute, ideally an <code>&lt;img&gt;</code> or a layer element with no child elements</li>
      <li>With DLL.js works with videos as well. How cool is that?</li>
      <li>Works for <code>&lt;img&gt;</code> and other elements as well, to update the <code>background-image</code></li>
      <li>When an element other than image/video is targeted, it will also lazy load it's child elements having the <code>data-src</code> attribute</li>
      <li>You can also call DLL to do lazy load for all elements in a page at once, by simply using <code>new dll();</code></li>
      <li>DLL has callback ability and it's triggered when the target element is loaded or it's last element is loaded</li>
      <li>With a <code>elementInViewport</code> function you can lazy load elements on scroll, like the example above</li>
      <li>It's super light, around 1Kb in size and you can do so much with it</li>
      <li>Give it <a href="http://polyfill.io">polyfills</a> and legacy browsers will thank you</li>
    </ul>
  </div>	

  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div> <div class="clearfix"><br></div>
  
  <div class="content-wrap">
    <h2>I highly recommend</h2>
    <ul>
      <li>For SEO reasons, don't use it for content images unless their really big and affect the page load speed</li>
      <li>Use it wisely and you can achieve higher page load speed while allowing crawlers to cache your images, this can be done using two images: one hidden, with proper <code>src</code> attribute and another one visible with <code>data-src</code> attribute</li>
      <li>Don't do <code>new dll();</code> or <code>new dll('body');</code> unless you really want to do that, you may want to change what happens with each element alone</li>
      <li>You may want to add a CSS class to a parent target and check it when a certain event such as scroll is used, you don't want bubbles, right?</li>

    </ul>
  </div>	
    
      <!-- FOOTER -->
     <footer>
    <div class="content-wrap">
      <p class="pull-right"><a id="toTop" href="#">Back to top</a></p>
      <p>&copy; 2020 &middot; <a href="https://github.com/thednp">thednp</a>.</p>
    </div>
    </footer>

 </div><!-- /.site-wrapper -->
 
<div class="page-loader">
  <div class="page-loader-wrap">
  <img src="./assets/img/loader.gif" alt="loader">
  <h1>Hi. I'm DLL.js</h1>
  <p>lazy loading a random 4K image...</p>
  </div>
</div>

<!-- JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->	

<!-- highlighter -->	
<script src="./assets/js/prism.js"></script>
<script src="./dist/dll.js"></script>
<script src="https://cdn.jsdelivr.net/npm/kute.js@1.6.4/kute.min.js"></script> <!-- KUTE CDN -->

<script src="./assets/js/scripts.js"></script> <!-- some stuff -->
</body>
</html>
